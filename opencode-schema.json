{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "agent": {
      "description": "Agent configuration",
      "properties": {
        "color": {
          "description": "Badge color for subagent display (e.g., 'blue', 'orange', 'primary', 'warning')",
          "type": "string"
        },
        "description": {
          "description": "Description of the agent's purpose",
          "type": "string"
        },
        "hidden": {
          "default": false,
          "description": "Whether the agent is hidden from TUI agent switching",
          "type": "boolean"
        },
        "maxTokens": {
          "description": "Maximum tokens for the agent",
          "minimum": 1,
          "type": "integer"
        },
        "mode": {
          "description": "Agent mode: 'agent' for primary agents, 'subagent' for agents invoked by task tool",
          "enum": [
            "agent",
            "subagent"
          ],
          "type": "string"
        },
        "model": {
          "description": "Model ID for the agent",
          "enum": [
            "o1-pro",
            "llama-3.3-70b-versatile",
            "moonshotai/kimi-k2-instruct",
            "openrouter.o3",
            "openrouter.nemotron-3-nano",
            "openrouter.claude-3.5-sonnet",
            "claude-4-5-sonnet[1m]",
            "meta-llama/llama-4-maverick-17b-128e-instruct",
            "grok-4-1-fast-non-reasoning",
            "grok-code-fast-1",
            "openrouter.claude-3.5-haiku",
            "claude-4-opus",
            "openrouter.gpt-4.5-preview",
            "openrouter.deepseek-r1-free",
            "openrouter.devstral-2",
            "openrouter.o1-mini",
            "openrouter.gpt-4o-mini",
            "openrouter.gpt-4.1",
            "bedrock.claude-4.5-sonnet",
            "claude-3.5-sonnet",
            "gpt-4.1-mini",
            "gemini-2.0-flash-lite",
            "gemini-3.0-pro",
            "gemini-2.0-flash",
            "claude-3-haiku",
            "gpt-4.1",
            "gpt-5",
            "openrouter.kimi-k2",
            "o1",
            "gemini-2.5",
            "claude-4-sonnet",
            "o3",
            "meta-llama/llama-4-scout-17b-16e-instruct",
            "openrouter.gpt-4.1-nano",
            "openrouter.gpt-5.2-codex",
            "vertexai.claude-opus-4-6",
            "gpt-4o",
            "openrouter.glm-4.7-flash",
            "openrouter.mimo-v2-flash",
            "openrouter.claude-3.7-sonnet",
            "vertexai.gemini-3.0-flash",
            "claude-3.7-sonnet",
            "openrouter.gemini-2.5-flash",
            "openrouter.gpt-4.1-mini",
            "openrouter.claude-3-opus",
            "deepseek-chat",
            "openrouter.gpt-4o",
            "vertexai.claude-sonnet-4-5-m",
            "gpt-4o-mini",
            "gpt-4.5-preview",
            "gemini-3.0-flash",
            "openrouter.o1",
            "openrouter.o1-pro",
            "grok-4-0709",
            "claude-4.5-opus",
            "claude-4.6-opus",
            "openrouter.o4-mini",
            "openrouter.gemini-2.5",
            "vertexai.claude-opus-4-5",
            "openrouter.gpt-5.2",
            "claude-3-opus",
            "o1-mini",
            "o3-mini",
            "qwen-qwq",
            "grok-4-fast-reasoning",
            "openrouter.o3-mini",
            "deepseek-reasoner",
            "o4-mini",
            "grok-4-1-fast-reasoning",
            "grok-4-fast-non-reasoning",
            "openrouter.claude-3-haiku",
            "openrouter.gemini-3",
            "openrouter.deepseek-v3.2",
            "vertexai.gemini-3.0-pro",
            "claude-3.5-haiku",
            "gpt-4.1-nano",
            "gemini-2.5-flash",
            "deepseek-r1-distill-llama-70b"
          ],
          "type": "string"
        },
        "name": {
          "description": "Display name for the agent",
          "type": "string"
        },
        "permission": {
          "additionalProperties": {
            "anyOf": [
              {
                "description": "Simple permission action",
                "enum": [
                  "allow",
                  "deny",
                  "ask"
                ],
                "type": "string"
              },
              {
                "additionalProperties": {
                  "enum": [
                    "allow",
                    "deny",
                    "ask"
                  ],
                  "type": "string"
                },
                "description": "Granular permission patterns (glob-pattern keys to action values)",
                "type": "object"
              }
            ]
          },
          "description": "Agent-specific permission overrides. Keys are tool names (e.g., 'bash', 'edit', 'skill'), values are either a simple action string or an object with glob-pattern keys",
          "type": "object"
        },
        "prompt": {
          "description": "Custom system prompt for the agent",
          "type": "string"
        },
        "reasoningEffort": {
          "description": "Reasoning effort for models that support it (OpenAI, Anthropic). 'max' is only available for models with maximum thinking support.",
          "enum": [
            "low",
            "medium",
            "high",
            "max"
          ],
          "type": "string"
        },
        "tools": {
          "additionalProperties": {
            "description": "Whether the tool is enabled for this agent",
            "type": "boolean"
          },
          "description": "Tool enable/disable configuration",
          "type": "object"
        }
      },
      "required": [
        "model"
      ],
      "type": "object"
    }
  },
  "description": "Configuration schema for the OpenCode application",
  "properties": {
    "agents": {
      "additionalProperties": {
        "description": "Agent configuration",
        "properties": {
          "color": {
            "description": "Badge color for subagent display (e.g., 'blue', 'orange', 'primary', 'warning')",
            "type": "string"
          },
          "description": {
            "description": "Description of the agent's purpose",
            "type": "string"
          },
          "hidden": {
            "default": false,
            "description": "Whether the agent is hidden from TUI agent switching",
            "type": "boolean"
          },
          "maxTokens": {
            "description": "Maximum tokens for the agent",
            "minimum": 1,
            "type": "integer"
          },
          "mode": {
            "description": "Agent mode: 'agent' for primary agents, 'subagent' for agents invoked by task tool",
            "enum": [
              "agent",
              "subagent"
            ],
            "type": "string"
          },
          "model": {
            "description": "Model ID for the agent",
            "enum": [
              "o1-pro",
              "llama-3.3-70b-versatile",
              "moonshotai/kimi-k2-instruct",
              "openrouter.o3",
              "openrouter.nemotron-3-nano",
              "openrouter.claude-3.5-sonnet",
              "claude-4-5-sonnet[1m]",
              "meta-llama/llama-4-maverick-17b-128e-instruct",
              "grok-4-1-fast-non-reasoning",
              "grok-code-fast-1",
              "openrouter.claude-3.5-haiku",
              "claude-4-opus",
              "openrouter.gpt-4.5-preview",
              "openrouter.deepseek-r1-free",
              "openrouter.devstral-2",
              "openrouter.o1-mini",
              "openrouter.gpt-4o-mini",
              "openrouter.gpt-4.1",
              "bedrock.claude-4.5-sonnet",
              "claude-3.5-sonnet",
              "gpt-4.1-mini",
              "gemini-2.0-flash-lite",
              "gemini-3.0-pro",
              "gemini-2.0-flash",
              "claude-3-haiku",
              "gpt-4.1",
              "gpt-5",
              "openrouter.kimi-k2",
              "o1",
              "gemini-2.5",
              "claude-4-sonnet",
              "o3",
              "meta-llama/llama-4-scout-17b-16e-instruct",
              "openrouter.gpt-4.1-nano",
              "openrouter.gpt-5.2-codex",
              "vertexai.claude-opus-4-6",
              "gpt-4o",
              "openrouter.glm-4.7-flash",
              "openrouter.mimo-v2-flash",
              "openrouter.claude-3.7-sonnet",
              "vertexai.gemini-3.0-flash",
              "claude-3.7-sonnet",
              "openrouter.gemini-2.5-flash",
              "openrouter.gpt-4.1-mini",
              "openrouter.claude-3-opus",
              "deepseek-chat",
              "openrouter.gpt-4o",
              "vertexai.claude-sonnet-4-5-m",
              "gpt-4o-mini",
              "gpt-4.5-preview",
              "gemini-3.0-flash",
              "openrouter.o1",
              "openrouter.o1-pro",
              "grok-4-0709",
              "claude-4.5-opus",
              "claude-4.6-opus",
              "openrouter.o4-mini",
              "openrouter.gemini-2.5",
              "vertexai.claude-opus-4-5",
              "openrouter.gpt-5.2",
              "claude-3-opus",
              "o1-mini",
              "o3-mini",
              "qwen-qwq",
              "grok-4-fast-reasoning",
              "openrouter.o3-mini",
              "deepseek-reasoner",
              "o4-mini",
              "grok-4-1-fast-reasoning",
              "grok-4-fast-non-reasoning",
              "openrouter.claude-3-haiku",
              "openrouter.gemini-3",
              "openrouter.deepseek-v3.2",
              "vertexai.gemini-3.0-pro",
              "claude-3.5-haiku",
              "gpt-4.1-nano",
              "gemini-2.5-flash",
              "deepseek-r1-distill-llama-70b"
            ],
            "type": "string"
          },
          "name": {
            "description": "Display name for the agent",
            "type": "string"
          },
          "permission": {
            "additionalProperties": {
              "anyOf": [
                {
                  "description": "Simple permission action",
                  "enum": [
                    "allow",
                    "deny",
                    "ask"
                  ],
                  "type": "string"
                },
                {
                  "additionalProperties": {
                    "enum": [
                      "allow",
                      "deny",
                      "ask"
                    ],
                    "type": "string"
                  },
                  "description": "Granular permission patterns (glob-pattern keys to action values)",
                  "type": "object"
                }
              ]
            },
            "description": "Agent-specific permission overrides. Keys are tool names (e.g., 'bash', 'edit', 'skill'), values are either a simple action string or an object with glob-pattern keys",
            "type": "object"
          },
          "prompt": {
            "description": "Custom system prompt for the agent",
            "type": "string"
          },
          "reasoningEffort": {
            "description": "Reasoning effort for models that support it (OpenAI, Anthropic). 'max' is only available for models with maximum thinking support.",
            "enum": [
              "low",
              "medium",
              "high",
              "max"
            ],
            "type": "string"
          },
          "tools": {
            "additionalProperties": {
              "description": "Whether the tool is enabled for this agent",
              "type": "boolean"
            },
            "description": "Tool enable/disable configuration",
            "type": "object"
          }
        },
        "required": [
          "model"
        ],
        "type": "object"
      },
      "description": "Agent configurations",
      "properties": {
        "coder": {
          "$ref": "#/definitions/agent"
        },
        "descriptor": {
          "$ref": "#/definitions/agent"
        },
        "explorer": {
          "$ref": "#/definitions/agent"
        },
        "hivemind": {
          "$ref": "#/definitions/agent"
        },
        "summarizer": {
          "$ref": "#/definitions/agent"
        },
        "workhorse": {
          "$ref": "#/definitions/agent"
        }
      },
      "type": "object"
    },
    "autoCompact": {
      "default": true,
      "description": "Enable automatic compaction of session history",
      "type": "boolean"
    },
    "contextPaths": {
      "default": [
        ".github/copilot-instructions.md",
        ".cursorrules",
        ".cursor/rules/",
        "CLAUDE.md",
        "CLAUDE.local.md",
        "opencode.md",
        "opencode.local.md",
        "OpenCode.md",
        "OpenCode.local.md",
        "OPENCODE.md",
        "OPENCODE.local.md",
        "AGENTS.md",
        "AGENTS.local.md"
      ],
      "description": "Context paths for the application",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "data": {
      "description": "Storage configuration",
      "properties": {
        "directory": {
          "default": ".opencode",
          "description": "Directory where application data is stored",
          "type": "string"
        }
      },
      "required": [
        "directory"
      ],
      "type": "object"
    },
    "debug": {
      "default": false,
      "description": "Enable debug mode",
      "type": "boolean"
    },
    "debugLSP": {
      "default": false,
      "description": "Enable LSP debug mode",
      "type": "boolean"
    },
    "disableLSPDownload": {
      "default": false,
      "description": "Disable automatic downloading and installation of LSP servers. Can also be set via OPENCODE_DISABLE_LSP_DOWNLOAD environment variable.",
      "type": "boolean"
    },
    "lsp": {
      "additionalProperties": {
        "description": "LSP configuration for a language server",
        "properties": {
          "args": {
            "description": "Command arguments for the LSP server",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "command": {
            "description": "Command to execute for the LSP server",
            "type": "string"
          },
          "disabled": {
            "default": false,
            "description": "Whether the LSP server is disabled",
            "type": "boolean"
          },
          "env": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "Environment variables to set when starting the LSP server",
            "type": "object"
          },
          "extensions": {
            "description": "File extensions this LSP server should handle (e.g., [\".go\", \".mod\"])",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "initialization": {
            "description": "Initialization options sent to the LSP server during the initialize request. Options vary by server.",
            "type": "object"
          }
        },
        "type": "object"
      },
      "description": "Language Server Protocol configurations. Built-in servers are auto-detected; use this to override, disable, or add custom servers.",
      "type": "object"
    },
    "mcpServers": {
      "additionalProperties": {
        "description": "MCP server configuration",
        "properties": {
          "args": {
            "description": "Command arguments for the MCP server",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "command": {
            "description": "Command to execute for the MCP server",
            "type": "string"
          },
          "env": {
            "description": "Environment variables for the MCP server",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "headers": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "HTTP headers for SSE type MCP servers",
            "type": "object"
          },
          "type": {
            "default": "stdio",
            "description": "Type of MCP server",
            "enum": [
              "stdio",
              "sse"
            ],
            "type": "string"
          },
          "url": {
            "description": "URL for SSE type MCP servers",
            "type": "string"
          }
        },
        "required": [
          "command"
        ],
        "type": "object"
      },
      "description": "Model Control Protocol server configurations",
      "type": "object"
    },
    "permission": {
      "additionalProperties": {
        "anyOf": [
          {
            "description": "Simple permission action for all uses of this tool",
            "enum": [
              "allow",
              "deny",
              "ask"
            ],
            "type": "string"
          },
          {
            "additionalProperties": {
              "enum": [
                "allow",
                "deny",
                "ask"
              ],
              "type": "string"
            },
            "description": "Granular permission patterns (glob-pattern keys to action values)",
            "type": "object"
          }
        ]
      },
      "description": "Global permission configuration. Keys are tool names (e.g., 'bash', 'edit', 'skill'). Values are either a simple action string or an object with glob-pattern keys.",
      "properties": {
        "skill": {
          "additionalProperties": {
            "description": "Permission action",
            "enum": [
              "allow",
              "deny",
              "ask"
            ],
            "type": "string"
          },
          "description": "Skill permission patterns (supports wildcards like 'internal-*')",
          "type": "object"
        }
      },
      "type": "object"
    },
    "providers": {
      "additionalProperties": {
        "description": "Provider configuration",
        "properties": {
          "apiKey": {
            "description": "API key for the provider",
            "type": "string"
          },
          "baseURL": {
            "description": "Base URL for the provider instead of default one",
            "type": "string"
          },
          "disabled": {
            "default": false,
            "description": "Whether the provider is disabled",
            "type": "boolean"
          },
          "headers": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "Extra headers to attach to request",
            "type": "object"
          },
          "provider": {
            "description": "Provider type",
            "enum": [
              "anthropic",
              "openai",
              "gemini",
              "bedrock",
              "vertexai"
            ],
            "type": "string"
          }
        },
        "type": "object"
      },
      "description": "LLM provider configurations",
      "type": "object"
    },
    "sessionProvider": {
      "description": "Session storage provider configuration",
      "properties": {
        "mysql": {
          "description": "MySQL-specific configuration",
          "properties": {
            "connectionTimeout": {
              "default": 30,
              "description": "Connection timeout in seconds",
              "type": "integer"
            },
            "database": {
              "description": "MySQL database name",
              "type": "string"
            },
            "dsn": {
              "description": "MySQL Data Source Name (DSN) connection string",
              "type": "string"
            },
            "host": {
              "description": "MySQL server host",
              "type": "string"
            },
            "maxConnections": {
              "default": 10,
              "description": "Maximum number of open connections",
              "type": "integer"
            },
            "maxIdleConnections": {
              "default": 5,
              "description": "Maximum number of idle connections",
              "type": "integer"
            },
            "password": {
              "description": "MySQL password",
              "type": "string"
            },
            "port": {
              "default": 3306,
              "description": "MySQL server port",
              "type": "integer"
            },
            "username": {
              "description": "MySQL username",
              "type": "string"
            }
          },
          "type": "object"
        },
        "type": {
          "default": "sqlite",
          "description": "Type of session storage provider",
          "enum": [
            "sqlite",
            "mysql"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "shell": {
      "description": "Shell configuration for the bash tool",
      "properties": {
        "args": {
          "default": [
            "-l"
          ],
          "description": "Arguments to pass to the shell",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "path": {
          "description": "Path to the shell executable",
          "type": "string"
        }
      },
      "type": "object"
    },
    "skills": {
      "description": "Skills configuration",
      "properties": {
        "paths": {
          "description": "Custom paths to search for skills (supports ~ for home directory and relative paths)",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "tui": {
      "description": "Terminal User Interface configuration",
      "properties": {
        "theme": {
          "default": "opencode",
          "description": "TUI theme name",
          "enum": [
            "opencode",
            "catppuccin",
            "dracula",
            "flexoki",
            "gruvbox",
            "monokai",
            "onedark",
            "tokyonight",
            "tron"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "wd": {
      "description": "Working directory for the application",
      "type": "string"
    }
  },
  "title": "OpenCode Configuration",
  "type": "object"
}
